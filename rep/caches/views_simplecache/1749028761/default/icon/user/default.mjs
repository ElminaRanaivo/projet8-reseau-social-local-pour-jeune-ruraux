import 'jquery';function loadMenu(mac,callback){var $all_placeholders=$(".elgg-menu-hover[data-menu-id='"+mac+"']");if(!$all_placeholders.length){return}
import('elgg/Ajax').then((Ajax)=>{var ajax=new Ajax.default();ajax.view('navigation/menu/user_hover/contents',{data:$all_placeholders.eq(0).data('elggMenuData'),success:function(data){if(data){$all_placeholders.html($(data))}
if(typeof callback==='function'){callback()}},complete:function(){$all_placeholders.removeAttr('data-menu-id data-elgg-menu-data')}})})};function showPopup($icon){var $hovermenu=$icon.data('hovermenu')||null;if(!$hovermenu){$hovermenu=$icon.parent().find('.elgg-menu-hover');$icon.data('hovermenu',$hovermenu)}
import('elgg/popup').then((popup)=>{if($hovermenu.is(':visible')){popup.default.close($hovermenu)}else{popup.default.open($icon,$hovermenu,{'my':'left top','at':'left top','of':$icon.closest('.elgg-avatar'),'collision':'fit fit'})}})};$(document).on('click','.elgg-avatar-menu > a',function(e){e.preventDefault();var $icon=$(this);var $placeholder=$icon.parent().find('.elgg-menu-hover[data-menu-id]');if($placeholder.length){loadMenu($placeholder.attr('data-menu-id'),function(){showPopup($icon)})}else{showPopup($icon)}})