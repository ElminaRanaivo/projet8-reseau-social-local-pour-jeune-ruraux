import 'jquery';import 'jquery-ui';import Ajax from 'elgg/Ajax';import lightbox from 'elgg/lightbox';function moveWidget(event,ui){var guidString=ui.item.attr('id');guidString=guidString.substring(guidString.indexOf('elgg-widget-')+"elgg-widget-".length);var ajax=new Ajax(!1);ajax.action('widgets/move',{data:{widget_guid:guidString,column:ui.item.parent().data('widgetColumn'),position:ui.item.index()}})};function removeWidget(event){event.preventDefault();$(this).closest('.elgg-module-widget').remove();var ajax=new Ajax(!1);ajax.action($(this).attr('href'))};function saveWidgetSettings(event){event.preventDefault();var $widgetContent=$('#elgg-widget-content-'+$(this).find('input[name="guid"]').val());var ajax=new Ajax();ajax.action('widgets/save',{data:ajax.objectify(this),success:function(result){lightbox.close();$widgetContent.html(result.content);if(result.title!==''){var $widgetTitle=$widgetContent.parent().parent().find('.elgg-widget-title');var newWidgetTitle=result.title;if(result.href!==''){newWidgetTitle="<a href='"+result.href+"' class='elgg-anchor'><span class='elgg-anchor-label'>"+newWidgetTitle+"</span></a>"}
$widgetTitle.html(newWidgetTitle)}}})};$('.elgg-widgets').sortable({items:'.elgg-module-widget.elgg-state-draggable',connectWith:'.elgg-widgets',handle:'.elgg-widget-handle',forcePlaceholderSize:!0,placeholder:'elgg-widget-placeholder',opacity:0.8,revert:500,stop:moveWidget});$(document).on('click','a.elgg-widget-delete-button',removeWidget);$(document).on('submit','.elgg-widget-edit > form ',saveWidgetSettings)